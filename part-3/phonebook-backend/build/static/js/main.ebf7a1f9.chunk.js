(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{16:function(e,t,n){e.exports=n(38)},38:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(14),c=n.n(o),u=(n(5),n(15)),i=n(2),l=function(e){var t=e.value,n=e.event;return r.a.createElement("div",null,"filter shown with: ",r.a.createElement("input",{value:t,onChange:n}))},f=function(e){var t=e.obj,n=e.query,a=e.callback;return t.filter((function(e){return e.name.toLowerCase().indexOf(n.toLowerCase())>-1})).map((function(e){return[e.name,e.number,e.id]})).map((function(e){var n=[e[0],e[1],e[2]],o=n[0],c=n[1],u=n[2];return r.a.createElement("p",{key:o},o," ",c,r.a.createElement("button",{type:"button",onClick:function(){return a(u,t)}},"delete"))}))},m=function(e){var t=e.action,n=e.valname,a=e.evname,o=e.valnumber,c=e.evnumber;return r.a.createElement("form",{onSubmit:t},r.a.createElement("div",null,"name: ",r.a.createElement("input",{value:n,onChange:a})),r.a.createElement("div",null,"number: ",r.a.createElement("input",{value:o,onChange:c})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add")))},d=function(e){var t=e.message,n=e.type,a=n?"notif ".concat(n):"notif";return null===t?null:r.a.createElement("div",{className:a},t)},s=n(3),b=n.n(s),v="/api/persons",p=function(){return b.a.get(v).then((function(e){return e.data}))},h=function(e){return b.a.post(v,e).then((function(e){return e.data}))},g=function(e,t){return b.a.put("".concat(v,"/").concat(e),t).then((function(e){return e.data}))},E=function(e){return b.a.delete("".concat(v,"/").concat(e)).then((function(e){return e.data}))},w=function(){var e=Object(a.useState)([]),t=Object(i.a)(e,2),n=t[0],o=t[1],c=Object(a.useState)(""),s=Object(i.a)(c,2),b=s[0],v=s[1],w=Object(a.useState)(""),O=Object(i.a)(w,2),j=O[0],S=O[1],y=Object(a.useState)(""),k=Object(i.a)(y,2),C=k[0],x=k[1],L=Object(a.useState)(null),D=Object(i.a)(L,2),J=D[0],N=D[1],q=Object(a.useState)(null),A=Object(i.a)(q,2),I=A[0],U=A[1];Object(a.useEffect)((function(){p().then((function(e){o(e)})).catch((function(e){B(e.toString(),"fail")}))}),[]);var B=function(e,t){N(e),U(t),setTimeout((function(){N(null)}),5e3)},F=function(e){var t=n.find((function(t){return t.id===e})),a=Object(u.a)({},t,{name:b,number:j});g(e,a).then((function(t){o(n.map((function(n){return n.id!==e?n:t}))),B("Updated: ".concat(b),"msg"),v(""),S("")})).catch((function(e){console.log("Fail handleUpdate",e),B("Information of ".concat(b," has already been removed from server"),"fail")}))};return r.a.createElement("div",null,r.a.createElement("h1",null,"Phonebook"),r.a.createElement(d,{message:J,type:I}),r.a.createElement(l,{value:C,event:function(e){x(e.target.value)}}),r.a.createElement("h2",null,"Add a new"),r.a.createElement(m,{action:function(e){e.preventDefault();var t={name:b,number:j},a=n.map((function(e){return e.name}));if(-1!==a.indexOf(b)){var r=a.indexOf(b),c=n[r].id;window.alert("".concat(b," is already added to phonebook, replace the old number with a new one.")),F(c)}else""===b||""===j?window.alert("name or number fields can't be empty"):h(t).then((function(e){o(n.concat(e)),B("Added: ".concat(b),"msg"),v(""),S("")})).catch((function(e){B(JSON.stringify(e.response.data),"fail")}))},valname:b,evname:function(e){console.log(e.target.value),v(e.target.value)},valnumber:j,evnumber:function(e){console.log(e.target.value),S(e.target.value)}}),r.a.createElement("h2",null,"Numbers"),r.a.createElement(f,{obj:n,query:C,callback:function(e,t){var n=function(){return t.filter((function(t){return-1===t.id.toString().toLowerCase().indexOf(e.toString().toLowerCase())}))},a=t.filter((function(t){return-1!==t.id.toString().toLowerCase().indexOf(e.toString().toLowerCase())}))[0].name;window.confirm("Do you want to delete ".concat(a,"?"))&&E(e).then((function(){o(n),B("Deleted person","msg")})).catch((function(e){B(e.toString(),"fail")}))}}))};c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(w,null)),document.getElementById("root"))},5:function(e,t,n){}},[[16,1,2]]]);
//# sourceMappingURL=main.ebf7a1f9.chunk.js.map